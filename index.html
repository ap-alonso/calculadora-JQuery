<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="jquery-3.6.0.js"></script>
</head>
<body>
<style>
    .bloqMenu{width: 100%; display:flex;  height:40px;   align-items: center;   }
    .itemMenu{margin:3%;}
    .hrMenu{border-top: 1px solid#ccc;}
    .bloqCalculadoraBotones{width: 100%; display:flex; justify-content: center; height:100%;   align-items: center; margin:3% 0}
    .bloqCalculadora{width: 50%; }
    .bloqResultados{ background-color:rgb(199, 236, 247); width: 94% ; margin: auto;}
     #historia{ padding: 2% 5%; font-size:24px; font-weight:bold} 
     #resultado{ padding: 2% 5%; text-align: right;font-size:14px; font-size:24px; font-weight:bold}
    .bloqBotonera{ width: 100%; }
    .botonera{ display: flex; flex-wrap: wrap; justify-content: center; }
    .botones{ width: 22%; height:40px; background-color: rgb(227, 227, 227); display: flex; justify-content: center; align-items: center; margin: 1%}
    a:link { text-decoration: none; color: #000}
    a:hover, a:active {  color: #ccc;}
</style>
    <div class="bloqMenu">
        <div class="itemMenu"> <a href="javascript:;" id="calculadoraBotones" >Calculadora Botones</a></div>
        <div>  <a  href="javascript:;" id="calculadoraInput"> Calculadora Input </a></div>
    </div>
    <hr class="hrMenu" >
    <div class="bloqCalculadoraBotones">
        <div class="bloqCalculadora">
        <div class="bloqResultados">
                <div id="historia">&nbsp;</div> 
                <div id="resultado">0</div>
        </div>
        <div class="bloqBotonera">
            <div class="botonera" id="botonera"></div>
        </div>
        </div>
    </div>

    <script>
        $("#calculadoraBotones").click(function () {
         $(".bloqCalculadoraBotones").css('display', "flex");
        });

        $("#calculadoraInput").click(function () {
                $(".bloqCalculadoraBotones").css('display', "none");
            });





        var arrayNumeros=[], arrayOp = [], num01, encPunto, indexPunto;
        // Creación Botones
        creaBoton('C', 'reinicio');  creaBoton('<=','borrar');  creaBoton('%','porciento');  creaBoton('/','division');
        creaBoton('7', '7');         creaBoton('8', '8');       creaBoton('9', '9');         creaBoton('X','multiplicacion');
        creaBoton('4', '4');         creaBoton('5', '5');       creaBoton('6', '6');         creaBoton('-', 'resta');
        creaBoton('1', '1');         creaBoton('2', '2');       creaBoton('3', '3');         creaBoton('+', 'suma');
        creaBoton(' ', 'vacio');     creaBoton('0', '0');       creaBoton('.', 'punto');         creaBoton('=', 'igual');
        // Click Botones
        clickBoton('reinicio', 'C', 'reinicio');  clickBoton('accion', '<=','borrar');  clickBoton('op', '%','porciento');   clickBoton('op', '/','division');
        clickBoton('num', '7', '7');            clickBoton('num', '8', '8');          clickBoton('num', '9', '9');         clickBoton('op', 'x','multiplicacion');
        clickBoton('num', '4', '4');            clickBoton('num', '5', '5');          clickBoton('num', '6', '6');         clickBoton('op', '-', 'resta');
        clickBoton('num', '1', '1');            clickBoton('num', '2', '2');          clickBoton('num', '3', '3');         clickBoton('op', '+', 'suma');
        clickBoton('accion', ' ', 'vacio');     clickBoton('num','0', '0');           clickBoton('punto', '.', 'punto');   clickBoton('igual', '=', 'igual');
        // Fun crea botones
        function creaBoton(txt, valor){
            $('#botonera').append('<div class="botones" id="btn_'+valor+'"> <div>'+txt+'</div></div> ');
        }
        // Fun clickBoton
        function clickBoton(tipo, txt, valor){
            $('#btn_'+valor).click(function () {
                // Números
                if(tipo=='num'|| tipo == 'punto'){
                    if(tipo == 'num'){
                        arrayNumeros.push(valor);
                         $('#historia').append(txt);
                    }
                    if (tipo == 'punto') {
                        if(arrayNumeros!=''){
                            jQuery.each(arrayNumeros, function (i, x) {
                                encPunto = arrayNumeros.find(y => y == '.');
                                indexPunto= arrayNumeros.indexOf(encPunto);
                                if (indexPunto ==-1 ) {
                                     arrayNumeros.push(txt);
                                    $('#historia').append(txt);
                                    impre('ingresar punto');
                                }
                            });
                        }
                    }
                    num01 = arrayNumeros.join('');
                    impre(arrayNumeros);
                };
                // Operadores
                if(tipo=='op'){
                    $('#historia').append(txt);
                    arrayOp.push(num01);
                    arrayOp.push(valor);
                    arrayNumeros = [];
                    num01 = '';
                   impre(arrayOp);
                }
                // Igual
                if(tipo=='igual'){
                    if(num01!=''){
                        arrayOp.push(num01);
                    }
                    impre(arrayOp);
                    arrayNumeros = [];
                    num01 = '';
                    var n1 = parseFloat(arrayOp[0]);
                    var op = arrayOp[1];
                    var n2 = parseFloat(arrayOp[2]);
                    var res ='';
                    switch (op) {
                        case 'suma':
                        res=n1+n2;
                        break;
                        case 'resta':
                        res = n1 - n2;
                        break;
                        case 'multiplicacion':
                        res = n1 * n2;
                        break;
                        case 'division':
                        res = n1 / n2;
                        break;
                    }
                    $('#resultado').html(res);
                    $('#historia').html('&nbsp;');
                    arrayOp = [];
                }

                if (tipo == 'reinicio') {
                    $('#resultado').html('0');
                    $('#historia').html('&nbsp;');
                    arrayNumeros = [];
                    arrayOp = [];
                }
                
            });
        }
        function impre(x) { console.log(x);}
    </script>
</body>
</html>